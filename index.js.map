{"version":3,"file":"index.js","sources":["../src/js/izi-toasts.js","../src/js/locale-storage.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/load-more-btn.js","../src/js/events-handlers.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction errorAllert(message) {\n  iziToast.error({\n    timeout: 3000,\n    message: `${message}`,\n    position: 'topRight',\n    backgroundColor: 'rgba(239, 64, 64, 0.99)',\n    messageColor: '#FFFFFF',\n    icon: '',\n    close: false,\n  });\n}\n\nexport { errorAllert };\n","const LOCALSTORAGE_KEY = 'search-form-state';\n\nfunction setInputDataToLocalStorage(event) {\n  const query = event.target.form.elements.searchQuery.value.trim();\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(query));\n}\n\nfunction populateInputData(searchForm) {\n  const inputValue = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n  if (inputValue) {\n    searchForm.elements.searchQuery.value = inputValue;\n  }\n}\n\nfunction removeFromLS() {\n  localStorage.removeItem(LOCALSTORAGE_KEY);\n}\n\nexport { setInputDataToLocalStorage, populateInputData, removeFromLS };\n","import axios from 'axios';\n\nconst API_KEY = `30636701-b7bfaf1719dc5d89c8acde7b5`;\nconst BASE_URL = `https://pixabay.com/api/`;\n\nconst searchParams = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  q: '',\n  page: 1,\n};\n\nasync function getPhotos() {\n  const { data } = await axios.get(BASE_URL, {\n    params: searchParams\n  });\n  return data;\n}\n\nexport { getPhotos, searchParams };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-wraper');\n\nfunction renderGallery(images) {\n  const markup = images.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <div class=\"photo-card\">\n              <a href=\"${largeImageURL}\" class=\"img-link\">\n                  <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=360px; loading=\"lazy\" />\n              </a>\n              <div class=\"info\">\n                  <p class=\"info-item\">\n                      <b>Likes </b>${likes}\n                  </p>\n                  <p class=\"info-item\">\n                      <b>Views </b>${views}\n                  </p>\n                  <p class=\"info-item\">\n                      <b>Comments </b>${comments}\n                  </p>\n                  <p class=\"info-item\">\n                      <b>Downloads </b>${downloads}\n                  </p>\n              </div>\n            </div>\n        `;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  new SimpleLightbox('ul.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}\n\nfunction resetGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction renderLoader() {\n  loader.classList.add('active');\n}\n\nfunction resetLoader() {\n  loader.classList.remove('active');\n}\n\nfunction scrollByPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport {\n  renderGallery,\n  resetGallery,\n  renderLoader,\n  resetLoader,\n  scrollByPage,\n};\n","export default class LoadMoreButton {\n  static HIDDEN_CLASS = 'hidden';\n  static END_MESSAGE_CLASS = 'end-message';\n\n  constructor(buttonEl) {\n    this.button = buttonEl;\n  }\n\n  disable() {\n    this.button.disabled = true;\n  }\n\n  enable() {\n    this.button.disabled = false;\n  }\n\n  hide() {\n    this.button.classList.add(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n  show() {\n    this.button.classList.remove(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n  addEndCollectionMessage() {\n    this.button.classList.add(LoadMoreButton.END_MESSAGE_CLASS);\n    this.button.textContent =\n      \"We're sorry, but you've reached the end of search results.\";\n  }\n\n  removeEndCollectionMessage() {\n    this.button.classList.remove(LoadMoreButton.END_MESSAGE_CLASS);\n    this.button.textContent =\n      \"Load more\";\n  }\n}","import { errorAllert } from './izi-toasts';\nimport { removeFromLS } from './locale-storage';\nimport { getPhotos, searchParams } from './pixabay-api';\nimport {\n  renderGallery,\n  renderLoader,\n  resetGallery,\n  resetLoader,\n  scrollByPage,\n} from './render-functions';\nimport LoadMoreButton from './load-more-btn';\n\nconst searchForm = document.querySelector('.form');\nconst loadMoreButton = new LoadMoreButton(document.querySelector('.load-more'));\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n  const query = event.currentTarget.elements.searchQuery.value.trim();\n  if (query === '') {\n    errorAllert('Enter your search request');\n    return;\n  }\n  loadMoreButton.disable();\n  loadMoreButton.hide();\n\n  resetGallery();\n  renderLoader();\n  searchParams.q = query;\n  searchParams.page = 1;\n  try {\n    const photos = await getPhotos();\n    if (photos.total === 0) {\n      errorAllert(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      loadMoreButton.hide();\n      resetLoader();\n      resetGallery();\n      return;\n    }\n\n    resetLoader();\n    renderGallery(photos);\n    if (searchParams.page === Math.ceil(photos.totalHits / 15)) {\n      loadMoreButton.show();\n      loadMoreButton.addEndCollectionMessage();\n    } else {\n      loadMoreButton.removeEndCollectionMessage();\n      loadMoreButton.enable();\n      loadMoreButton.show();\n      loadMoreButton.button.addEventListener('click', onLoadMoreClick);\n    }\n  } catch (error) {\n    errorAllert(`Error ${error}`);\n    resetLoader();\n  } finally {\n    searchForm.reset();\n  }\n  event.target.reset();\n  removeFromLS();\n}\n\nasync function onLoadMoreClick() {\n  loadMoreButton.disable();\n  loadMoreButton.hide();\n  renderLoader();\n  searchParams.page += 1;\n\n  try {\n    const photos = await getPhotos(searchParams);\n    resetLoader();\n    renderGallery(photos);\n\n    scrollByPage();\n\n    if (searchParams.page === Math.ceil(photos.totalHits / 15)) {\n      loadMoreButton.addEndCollectionMessage();\n      loadMoreButton.show();\n    } else {\n      loadMoreButton.removeEndCollectionMessage();\n      resetLoader();\n      loadMoreButton.enable();\n      loadMoreButton.show();\n    }\n  } catch (err) {\n    errorAllert(`Error ${err}`);\n    loadMoreButton.hide();\n  }\n}\n\nexport { onSubmitForm, onLoadMoreClick };\n","import { onSubmitForm } from './js/events-handlers';\nimport {\n  populateInputData,\n  setInputDataToLocalStorage,\n} from './js/locale-storage';\n\nconst searchForm = document.querySelector('.form');\n\npopulateInputData(searchForm);\n\nsearchForm.addEventListener('input', setInputDataToLocalStorage);\nsearchForm.addEventListener('submit', onSubmitForm);\n\n"],"names":["errorAllert","message","iziToast","LOCALSTORAGE_KEY","setInputDataToLocalStorage","event","query","populateInputData","searchForm","inputValue","removeFromLS","API_KEY","BASE_URL","searchParams","getPhotos","data","axios","gallery","loader","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","resetGallery","renderLoader","resetLoader","scrollByPage","cardHeight","_LoadMoreButton","buttonEl","__publicField","LoadMoreButton","loadMoreButton","onSubmitForm","photos","onLoadMoreClick","error","err"],"mappings":"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"}